# -*- encoding: utf-8 -*-
from shapely.wkt import loads as wkt_loads
from . import FixtureTest


class NEroadminzoom(FixtureTest):

    def test_ne_road_min_zoom(self):
        import dsl

        z, x, y = (5, 5, 12)

        self.generate_fixtures(
            # Natural Earth sample, 101 in California
            dsl.way(1, wkt_loads( 'MULTILINESTRING ((-123.2114014269468214 39.24230081772638101, -123.22529418287111014 39.25966676263175259, -123.30344093494527158 39.30655481387624661, -123.32254347434117392 39.34649648715858916, -123.31212390739794671 39.360389243082885, -123.31386050188848458 39.37254540451664298, -123.35380217517084134 39.40554069983684116, -123.35727536415190286 39.42811642821381923, -123.34685579720868986 39.46805810149616889, -123.35901195864244073 39.49063382987314696, -123.37811449803835728 39.50626318028798067, -123.39895363192479749 39.53404869213656525, -123.42673914377338917 39.54099507009871672, -123.48231016747055833 39.69034219628488103, -123.53440800218666595 39.78585489326440694, -123.60213518731760018 39.82753316103728736, -123.63513048263780547 39.82058678307514299, -123.66291599448638294 39.82058678307514299, -123.68375512837282315 39.82926975552782523, -123.71501382920249057 39.86400164533856127))'), {
            #dsl.way(1, dsl.tile_diagonal(z, x, y), {
                'scalerank': 4.0,
                'featurecla': 'Road',
                'type': 'Major Highway',
                'name': '101',
                'toll': 0,
                'continent': 'North America',
                'expressway': 0,
                'level': 'Federal',
                'min_zoom': 4.0,
                'min_label': 7.0,
                'source': u'naturalearthdata.com',
            }),
        )

        self.assert_has_feature(
            z, x, y, 'roads', {
                'id': 1,
                'kind': u'highway',
                'min_zoom': 5.1,
            })
